CREATE OR REPLACE TRIGGER ORDER_TRIGGER  
AFTER INSERT  
ON ORDERITEM 
FOR EACH ROW
BEGIN 
UPDATE PRODUCT
SET QUANTITY = QUANTITY - :NEW.QUANTITY
WHERE PRODUCTID = :NEW.PRODUCTID;
EXCEPTION
    WHEN NO_DATA_FOUND THEN
        RAISE_APPLICATION_ERROR(-20001, 'Product not found for ProductID = ' || :NEW.ProductID);
    WHEN OTHERS THEN
        RAISE_APPLICATION_ERROR(-20002, 'Trigger failed: ' || SQLERRM);
END;